
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#client-access-token-retrieval" class="toc-h1 toc-link" data-title="Client access token retrieval">Client access token retrieval</a>
          </li>
          <li>
            <a href="#api-usage" class="toc-h1 toc-link" data-title="API Usage">API Usage</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#transcripts-overview" class="toc-h2 toc-link" data-title="Transcripts overview">Transcripts overview</a>
                  </li>
                  <li>
                    <a href="#retrieving-variant-predictions" class="toc-h2 toc-link" data-title="Retrieving variant predictions">Retrieving variant predictions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Documentation for the Corona.ai Prediction API. This API is currently in <strong>ALPHA</strong>.</p>

<p>The API is secured and you need credentials to be able to use it. We use the industry-standard OAuth2 protocol.
For those of you who&#39;d like more information about the ins and outs of OAuth2 please take a look <a href="https://auth0.com/docs/protocols/oauth2">here</a>.
Note that using the API is incredibly easy; you don&#39;t really need an in-depth understanding of OAuth2 to be able to use this API.
This documentation contains all the information you need to get started!   </p>
<h1 id='client-access-token-retrieval'>Client access token retrieval</h1><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">"https://eggwhite.eu.auth0.com/oauth/token"</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">},</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s">"client_id"</span><span class="p">:</span><span class="s">"&lt;client_id&gt;"</span><span class="p">,</span>
        <span class="s">"client_secret"</span><span class="p">:</span><span class="s">"&lt;client_secret&gt;"</span><span class="p">,</span>
        <span class="s">"audience"</span><span class="p">:</span><span class="s">"predictions.ai.bio-prodict.nl"</span><span class="p">,</span>
        <span class="s">"grant_type"</span><span class="p">:</span><span class="s">"client_credentials"</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl --request POST <span class="se">\</span>
  --url https://eggwhite.eu.auth0.com/oauth/token <span class="se">\</span>
  --header <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data <span class="s1">'{"client_id":"&lt;client_id&gt;","":&lt;client_secret&gt;"audience":"predictions.ai.bio-prodict.nl","grant_type":"client_credentials"}'</span>
</code></pre>
<blockquote>
<p>Returns the following JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;access_token&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w"> </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Errors</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">When</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">client</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">invalid</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_denied"</span><span class="p">,</span><span class="w"> </span><span class="s2">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>We use the Auth0.com service to manage authentication and authorization.
Please check that you have received a <em>client_id</em> and a <em>client_secret</em> before continuing.
Retrieval of your access token is a two-step process:</p>

<ol>
<li><p>Your application authenticates with Auth0 using its <em>client_id</em> and <em>client_secret</em>.</p></li>
<li><p>Auth0 validates this information and returns an access_token.</p></li>
</ol>

<p>Retrieving the access token for interaction with our API can be achieved by sending a request to the
Auth0 authentication servers. Tokens have a lifespan of 24 hours. You need to re-acquire a new one
before the old one runs out in order to keep using the API without interruption.</p>

<p>We recommend the <code>requests</code> library for Python for ease of use.</p>
<h1 id='api-usage'>API Usage</h1>
<p>Having an <em>access_token</em>, you are now ready to use the API.</p>
<h2 id='transcripts-overview'>Transcripts overview</h2><pre class="highlight python tab-python"><code><span class="n">transcripts</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">"http://35.195.7.94:9998/transcripts"</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer &lt;access_token&gt;"</span><span class="p">}</span>
<span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
  --url http://35.195.7.94:9998/transcripts <span class="se">\</span>
  --header <span class="s1">'Authorization: Bearer &lt;access_token&gt;'</span>
</code></pre>
<blockquote>
<p>Returns the following JSON response:</p>
</blockquote>
<pre class="highlight plaintext"><code>["ENST00000257700", "ENST00000259008", "ENST00000260947", "ENST00000261584", ... ]
</code></pre>
<p>Returns a full list of the transcripts available on our API. Each of these can be used in other
calls. Transcripts are formatted as Ensemble identifiers. This list is retrieved from the <code>/transcripts</code>
endpoint.</p>
<h2 id='retrieving-variant-predictions'>Retrieving variant predictions</h2>
<blockquote>
<p>All the request parameters are contained in the URL</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="n">variant_data</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">"http://35.195.7.94:9998/transcripts/ENST00000622645/predictions/120/Ala"</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer &lt;access_token&gt;"</span><span class="p">}</span>
<span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl --request GET <span class="se">\</span>
  --url http://35.195.7.94:9998/transcripts/ENST00000622645/predictions/120/Ser <span class="se">\</span>
  --header <span class="s1">'Authorization: Bearer &lt;access_token&gt;'</span>
</code></pre>
<p>A single endpoint for variant prediction retrieval exists: <code>/transcripts/&lt;transcriptId&gt;/predictions/&lt;residueNumber&gt;/&lt;variantType&gt;</code>.
Using this endpoint requires the following:</p>

<ul>
<li><code>transcriptId</code>: A transcript identifier, like those found in the <code>/transcripts</code> endpoint response.</li>
<li><code>residueNumber</code>: A number indicating the residue in this transcript. Residue numbers start at 1.</li>
<li><code>variantType</code>: The variant you would like to find the information for. Only 3 letter codes are accepted. Case insensitive.</li>
</ul>

<blockquote>
<p>Returns the following JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"residue_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ala"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"residue_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ser"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source_max"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9630403221</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source_min"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2482662819</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spread"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7147740401</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transcript_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENST00000622645"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleterious"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1931773265</span><span class="p">,</span><span class="w">
    </span><span class="s2">"effect_summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1931 (benign, low confidence)"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Identifier</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>residue_type</td>
<td>Wildtype amino acid</td>
</tr>
<tr>
<td>residue_number</td>
<td>1-based protein sequence number</td>
</tr>
<tr>
<td>variant_type</td>
<td>Variant amino acid type</td>
</tr>
<tr>
<td>source_max</td>
<td>Highest sub-predictor prediction</td>
</tr>
<tr>
<td>source_min</td>
<td>Lowest sub-predictor prediction</td>
</tr>
<tr>
<td>spread</td>
<td>Difference between highest and lowest sub-predictions. Can be interpreted as a measure of uncertainty.</td>
</tr>
<tr>
<td>transcript_id</td>
<td>Ensembl transcript id</td>
</tr>
<tr>
<td>deleterious</td>
<td>Value indicating deleteriousness. Value between 0 and 1, where a value between 0 and 0.5 means benign and a value between 0.5 and 1 means deleterious.</td>
</tr>
<tr>
<td>effect_summary</td>
<td>A simple summary of the prediction with assesment of the impact on the protein and the confidence in the prediction. The first is based on the &#39;deleterious&#39; score, the second is based on the &#39;spread&#39; score. Our spread indicates the distance between predictions of our subclassifiers in our ensemble. If the score is below 0.15, we determine that the results of the subclassifiers are concordant, resulting in &quot;high confidence&quot;. Between 0.15 and 0.25 indicates &quot;medium confidence&quot; and scores above 0.25 indicate &quot;low confidence&quot;.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>Currently, all errors (including authentication errors) will yield a <code>500</code> response and a JSON body,
containing <code>{&quot;Error&quot;: &quot;Internal Server Error&quot;}</code>.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
